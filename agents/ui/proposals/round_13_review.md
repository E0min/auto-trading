# Round 13 교차 리뷰 — UI/UX

**리뷰어**: Senior UI/UX Engineer
**날짜**: 2026-02-17
**기준**: 정보 구조, 사용자 인지 부하, 모바일 대응, 컴포넌트 재사용성, 사용자 피드백 루프

---

## Trader 제안서 리뷰

### P13-1: 전략 설명 메타데이터 구조 확장
- **판정**: ⚠️ 조건부 동의
- **사유**: 구조화된 `docs` 객체 자체는 프론트엔드가 자동으로 UI를 렌더링하기에 매우 적합한 형태이다. 특히 `entry.long/short`를 배열로, `exit`를 키별 분리한 것이 좋다. 그러나 다음을 보완해야 한다:
  1. **내 제안(P9)의 `explainer` 구조와 통합 필요**: Trader의 `docs`와 내 `explainer`는 사실상 동일한 목적이다. 필드 이름을 합의해야 한다. 나는 Trader 제안의 `docs`라는 네이밍이 더 범용적이므로 이를 채택하되, 내 `explainer`에 있던 `indicators` 필드(사용 지표 명시 목록)를 반드시 포함해야 한다. 현재 Trader의 `docs` 구조에는 사용 지표 목록이 빠져 있다.
  2. **`riskReward` 섹션의 `typicalRR: '1:2~3'` 같은 문자열보다는 `typicalRR: { risk: 1, reward: [2, 3] }` 형태의 구조화된 값이 프론트엔드에서 시각적 바 또는 비율 표시를 자동 생성하는 데 유리하다.** 문자열이면 프론트엔드에서 파싱이 필요해진다.
  3. **`suitableFor` 필드는 좋으나**, 난이도를 문자열이 아닌 열거형(`'beginner' | 'intermediate' | 'advanced'`)으로 분리하면 프론트엔드에서 아이콘/배지로 매핑하기 쉽다.
  4. **`strengths`/`weaknesses` 배열은 3개 이내로 제한**하는 가이드라인이 필요하다. 프론트에서 카드 내에 렌더링할 때 5개 이상이면 정보 과부하가 된다.

### P13-2: 전략 요약 카드 + 동작 시각화 UI
- **판정**: ⚠️ 조건부 동의
- **사유**: 내 제안(P1, P2)과 거의 동일한 방향이다. 특히 "진입 조건 실시간 체크리스트" 아이디어는 매력적이나, 구현 난이도가 상당하다. 보완 사항:
  1. **"현재 어떤 조건이 충족/미충족인지 실시간" 표시(항목 2)는 P13-8과 합치는 것이 맞다.** 이것은 별도 API(`/strategies/:name/state`)가 필요하고, 각 전략 내부 상태를 직렬화하는 로직이 추가되어야 한다. Round 13 스코프에서는 **정적 설명(docs 기반)만 먼저 구현**하고, 실시간 조건 충족 표시는 Round 14로 미루는 것이 현실적이다.
  2. **항목 3의 "현재가 기준 SL/TP 가격 계산"은 좋지만**, 포지션이 없는 전략에서는 의미 없다. "현재 포지션이 있는 경우에만 표시"라는 조건부 렌더링이 필요하다.
  3. **항목 5의 타임프레임 배지**는 내 P1(Quick Stats Bar)과 통합 가능하다.

### P13-3: 하드코딩된 레버리지 제거 + config 참조로 통일
- **판정**: ✅ 동의
- **사유**: 사용자가 UI 슬라이더로 변경한 레버리지가 실제 시그널에 반영되지 않는 것은 **UX 신뢰성의 근본적 위반**이다. 사용자는 "내가 바꾼 값이 적용되었다"고 믿지만 실제로는 무시되는 상황. 즉시 수정 필수. 구현도 단순하다 (`leverage: this.config.leverage || '3'`). Engineer와 함께 최우선 처리해야 한다.

### P13-4: 글로벌 리스크 파라미터 UI
- **판정**: ⚠️ 조건부 동의
- **사유**: 글로벌 리스크 파라미터를 사용자에게 노출하는 것은 투명성 관점에서 매우 중요하다. 다만 UX 관점에서 보완이 필요하다:
  1. **"리스크 설정" 탭보다는 전용 모달 또는 사이드 패널**이 적합하다. RiskStatusPanel은 현재 읽기 전용 모니터링 역할인데, 여기에 편집 기능을 추가하면 "모니터링"과 "설정"이 혼재된다. 차라리 RiskStatusPanel에 "설정 변경" 버튼을 두고, 클릭 시 모달이 열리는 패턴이 인지적으로 분리된다.
  2. **위험 파라미터 변경 시 확인 다이얼로그 필수**. `maxTotalExposurePercent`를 30%에서 80%로 올리는 것은 위험한 행위. "현재 30% -> 80%로 변경합니다. 총 노출 한도가 2.7배 증가합니다." 같은 영향도 요약을 보여줘야 한다.
  3. **봇 실행 중 변경 시 경고**: "봇이 실행 중입니다. 변경 사항이 즉시 적용됩니다." 명시.
  4. **기본값 복원 버튼** 필수.

### P13-5: 전략 프리셋 시스템
- **판정**: ⚠️ 조건부 동의
- **사유**: 초급 사용자 온보딩에 효과적인 제안이다. 내 제안(P5)과 방향이 같지만, Trader 제안은 **전략 조합 + 글로벌 오버라이드 + 전략별 오버라이드**까지 포함하여 범위가 더 넓다. 보완:
  1. **프리셋이 "전략 활성화/비활성화"까지 제어하는 것은 위험**하다. 사용자가 프리셋을 바꿨을 때 자신이 수동으로 켠 전략이 갑자기 꺼지면 혼란스럽다. **리스크 파라미터 프리셋(보수/균형/공격)과 전략 조합 프리셋은 분리**해야 한다.
  2. **"현재 설정이 어떤 프리셋에 해당하는지" 역방향 매핑**이 필요하다. 사용자가 수동으로 파라미터를 조정한 뒤 "내 설정이 보수적인지 공격적인지" 알 수 없으면 프리셋의 의미가 반감된다. 현재 설정과 가장 가까운 프리셋을 하이라이트하는 UX가 필요.
  3. **프리셋 적용 전 "변경 사항 미리보기"** 필요. "보수적 프리셋을 적용하면 다음 값이 변경됩니다: 레버리지 3x -> 1x, 포지션 크기 5% -> 2%, ..." 같은 diff 표시.

### P13-6: MaTrend 타임프레임 집계 버그 수정
- **판정**: ✅ 동의
- **사유**: 이것은 사실상 **데이터 정확성 버그**이다. UI 관점에서 직접적인 프론트엔드 작업은 없지만, 사용자에게 "일봉 EMA"라고 설명하면서 실제로는 24분 데이터를 사용한다면 전략 설명(P13-1의 docs)이 거짓 정보가 된다. 전략 docs 작성 전에 이 버그가 수정되어야 docs의 타임프레임 정보가 정확해진다. **P13-1의 선행 조건으로 취급해야 한다.**

### P13-7: StrategyParamMeta에 카테고리/그룹 추가
- **판정**: ✅ 동의
- **사유**: 내 제안(P4, P8)의 핵심 선행 조건이다. `group` 필드 추가는 단순하면서도 프론트엔드 설정 패널의 UX를 근본적으로 개선한다. 4개 그룹 분류(`signal`, `indicator`, `risk`, `sizing`)도 적절하다. 다만 내 제안에서는 `entry`, `exit`, `risk`, `execution`으로 나눴는데, Trader의 분류가 더 세밀하다. 합의 필요하지만 큰 차이는 아니다.

### P13-8: 실시간 전략 상태 대시보드
- **판정**: ⚠️ 조건부 동의
- **사유**: 기능적으로 매우 매력적이지만, 이번 라운드에서 동시에 진행하기에는 범위가 너무 크다. 보완:
  1. **Round 14로 이관 권장**. Round 13은 이미 P13-1~P13-7만으로 BE 약 20h + FE 약 30h 규모이다. P13-8까지 포함하면 과부하.
  2. **API 설계만 이번 라운드에서 합의**: `/api/bot/strategies/:name/state`의 응답 스키마를 정의하되, 구현은 다음 라운드.
  3. **전략별 내부 상태를 직렬화하려면 각 전략에 `getInternalState()` 메서드가 필요**한데, 18개 전략 전부에 이를 추가하는 것은 상당한 작업량이다.

---

## Engineer 제안서 리뷰

### P-1: 전략 상세 설명 메타데이터 체계 구축
- **판정**: ✅ 동의
- **사유**: Trader의 P13-1과 본질적으로 동일한 제안이며, 세 에이전트 모두 합의하는 지점이다. Engineer의 `docs` 구조가 Trader보다 약간 단순한데(entry가 단일 문자열 vs 배열), **Trader의 배열 형태가 프론트엔드 렌더링에 더 적합**하다. 조건이 여러 개인 경우 배열로 분리되어 있어야 체크리스트 UI를 만들 수 있다. 최종 스키마는 Trader의 구조를 기반으로 하되, Engineer가 제안한 `warnings` 배열과 `bestFor` 필드를 포함하는 것이 좋다.

### P-2: 안전한 런타임 Config 변경 메커니즘
- **판정**: ✅ 동의 (P-2a, P-2b, P-2c 모두)
- **사유**: 이것은 내 P4(모듈별 설정 패널 재구성)의 **백엔드 필수 선행 조건**이다. 현재 서버측 검증이 없으면, 프론트엔드에서 아무리 `paramMeta`의 min/max를 체크해도, 직접 API를 호출하면 `leverage: 100`이 적용된다. UX 관점에서:
  1. **프론트엔드 검증은 편의(instant feedback)**, **서버측 검증은 안전(gatekeeping)**. 둘 다 필요하다. P-2a의 서버측 검증은 반드시 구현해야 한다.
  2. **P-2b의 atomic replace는 UX에 직접 영향이 없지만**, config 변경 후 이벤트 발행(`config_updated`)이 추가되면 프론트엔드에서 Socket.io를 통해 "설정이 적용되었습니다" 토스트를 실시간으로 보여줄 수 있어 사용자 피드백 루프가 개선된다.
  3. **P-2c의 validationErrors 응답 형태가 좋다.** 프론트엔드에서 필드별로 에러를 하이라이트하는 데 바로 사용 가능하다. `{ field, reason, min?, max?, value }` 구조를 유지해 달라.

### P-3: 통합 전략 정보 API 설계
- **판정**: ✅ 동의
- **사유**: 이것은 내가 오랫동안 원했던 것이다. 현재 프론트엔드가 전략 정보를 위해 `GET /strategies`와 `GET /status`를 모두 호출하고, 두 응답을 클라이언트에서 병합해야 한다. 통합 응답이 생기면:
  1. **네트워크 요청 1회 감소** (대시보드 로딩 속도 개선)
  2. **데이터 일관성 보장** (두 API 간 타이밍 불일치 제거)
  3. **`runtime` 객체에 `currentConfig`가 포함되는 것이 특히 중요**. 사용자가 변경한 설정값이 실제로 적용되고 있는지 확인할 수 있다.
  4. **`warmupProgress`도 좋다.** 전략이 아직 준비 중인데 "왜 시그널이 안 나오지?"라고 사용자가 의문을 품는 상황을 방지한다. 프론트엔드에서 진행 바로 표시 가능.

### P-4: CustomStrategyStore 안전성 개선
- **판정**: ✅ 동의
- **사유**: 비동기 I/O 전환, 원자적 쓰기, 직렬화 큐 모두 시스템 안정성 관점에서 올바른 방향이다. UX에 직접 영향은 적지만, `writeFileSync`가 이벤트 루프를 차단하면 실시간 데이터 업데이트가 순간적으로 멈출 수 있다. 특히 WebSocket 기반 실시간 UI에서 수 ms의 지연도 사용자가 "끊김"으로 인지할 수 있다. P-4c의 입력 스키마 검증도 CustomStrategyBuilder UI의 에러 피드백 개선에 도움된다.

### P-5: 전략 모듈 간 의존성 정리 (SignalPipeline 추출)
- **판정**: ⚠️ 조건부 동의
- **사유**: 구조적으로 올바른 방향이지만, Engineer 본인도 인정했듯이 **Round 14로 이관이 적절**하다. 이유:
  1. Round 13은 이미 docs 메타데이터 + config 검증 + API 통합 + FE 리디자인으로 충분히 크다.
  2. SignalPipeline 추출은 기존 동작에 영향 없는 순수 리팩토링이므로, 사용자 체감 변화가 0이다. 사용자 요청("전략이 뭘 하는지 보여줘")에 직접 응답하는 작업이 우선이어야 한다.
  3. **다만, 파이프라인의 "단계" 개념은 내 P3(파이프라인 시각화)와 연관된다.** 백엔드에서 파이프라인이 명시적으로 분리되면 프론트엔드 시각화도 더 정확해진다. Round 14에서 이 리팩토링이 완료되면 파이프라인 시각화의 정밀도를 높일 수 있다.

### P-6: 전략 숨김/표시 기능
- **판정**: ✅ 동의
- **사유**: 18개 전략이 한꺼번에 나열되면 초급 사용자에게 압도적이다. 숨김 기능은 단순하면서도 인지 부하를 크게 줄인다. UI 구현 관점:
  1. **카드 우측 상단에 눈/숨김 아이콘**은 적합하다.
  2. **하단에 "숨긴 전략 N개" 토글**도 좋다.
  3. **숨겨진 활성 전략에 대한 경고**는 필수이다. 활성 상태 전략을 숨기면 사용자가 동작 중인 전략을 잊어버릴 수 있다.
  4. **구현 시 로컬스토리지에 숨김 상태 저장도 고려**. 서버 저장이 주이지만, 클라이언트 캐시가 있으면 페이지 로드 시 깜빡임 없이 즉시 적용 가능.

### P-7: 자금관리 모듈 시각화
- **판정**: ⚠️ 조건부 동의
- **사유**: 탭 구조 제안(`[설명] [설정] [자금관리] [성과]`)은 논리적으로 매우 적절하다. 다만:
  1. **4개 탭은 모바일에서 가로 공간이 부족**하다. 모바일에서는 아이콘 탭 또는 드롭다운으로 전환해야 한다. 현재 StrategyDetail이 3개 탭(`포지션`, `거래내역`, `시그널`)인데 여기에 `설명`과 `자금관리`를 추가하면 5개가 된다. 모바일에서 5개 탭은 문제가 있다.
  2. **"연속 손실 시 자본 감소 시뮬레이션 그래프"는 Phase 2로**. Round 13에서는 정적 숫자 표시(현재 자본 대비 포지션 크기, 예상 최대 손실)만으로도 충분한 가치가 있다.
  3. **탭 구조 제안을 내 P2(전략 설명 패널)와 통합하여 최종 탭 구조를 합의해야 한다**: `[개요] [설정] [포지션] [거래] [시그널]`. 여기서 `[개요]`에 전략 설명 + 자금관리 핵심 수치를 함께 넣는 것이 탭 수를 줄이면서도 정보를 전달하는 방법이다.

---

## 종합 의견

### 3 에이전트 합의 지점 (즉시 진행 가능)

세 에이전트 모두가 동의하는 핵심 작업은 다음 4가지이다:

1. **전략 docs 메타데이터 추가** (Trader P13-1 = Engineer P-1 = UI P9): 필드명/구조 합의 후 즉시 착수. Trader가 내용을 작성하고, Engineer가 API를 확장하며, UI가 렌더링한다.
2. **paramMeta에 group/description 추가** (Trader P13-7 = Engineer 암시 = UI P8): 가장 적은 노력으로 가장 큰 UX 개선.
3. **하드코딩 레버리지 수정** (Trader P13-3): 버그 수정. 사용자 신뢰 직결.
4. **서버측 config 검증** (Engineer P-2): 안전성 필수 게이트.

### 구현 순서 권장 (UI/UX 관점)

사용자가 가장 빠르게 체감하는 순서로 나열하면:

| 순서 | 작업 | 담당 | 시간 | 사용자 체감 |
|------|------|------|------|------------|
| 1 | 레버리지 하드코딩 수정 (P13-3) | Engineer | 2h | 설정이 실제로 반영됨 |
| 2 | MaTrend 타임프레임 버그 (P13-6) | Engineer + Trader | 3h | 데이터 정확성 보장 |
| 3 | paramMeta group + description (P13-7/P8) | Trader + Engineer | 3h | 설정 패널이 그룹화됨 |
| 4 | 전략 docs 메타데이터 (P13-1/P-1/P9) | Trader(내용) + Engineer(API) | 6h | 전략 설명이 보임 |
| 5 | 서버측 config 검증 (P-2) | Engineer | 2.5h | 잘못된 값 입력 시 에러 피드백 |
| 6 | 통합 전략 정보 API (P-3) | Engineer | 2h | 대시보드 로딩 개선 |
| 7 | Quick Stats Bar + 카드 리디자인 (P1) | UI | 6h | 핵심 파라미터 즉시 확인 |
| 8 | 전략 설명 패널 (P2) | UI | 10h | 전략 동작 원리 이해 |
| 9 | 모듈별 설정 패널 재구성 (P4) | UI | 12h | 맥락 있는 파라미터 설정 |

### 스코프 관리

Round 13의 총 예상 규모를 종합하면:
- **Trader 제안**: 32h (8개 항목)
- **Engineer 제안**: 17h (7개 항목, P-5a 제외)
- **UI 제안**: 69h (10개 항목)

모든 것을 한 라운드에 넣으면 현실적으로 불가능하다. **핵심 원칙: 사용자가 "전략이 뭘 하는지 알 수 있게"를 Round 13에서 달성하고, "세밀하게 제어할 수 있게"는 Round 14로 분리한다.**

Round 13 스코프에 포함해야 할 것:
- P13-3 (레버리지 버그): 2h
- P13-6 (타임프레임 버그): 3h
- P13-1/P-1/P9 (docs 메타데이터): 6h
- P13-7/P8 (paramMeta 확장): 3h
- P-2a,b,c (config 검증): 2.5h
- P-3 (통합 API): 2h
- UI P1 (Quick Stats Bar): 6h
- UI P2 (전략 설명 패널): 10h
- **합계: 약 34.5h** (BE ~18.5h + FE ~16h, 2 Sprint 분량)

Round 14로 이관 권장:
- P13-5 (프리셋 시스템): 전략별 오버라이드 로직이 복잡
- P13-8 (실시간 전략 상태): 18개 전략 `getInternalState()` 구현 필요
- P-5 (SignalPipeline 추출): 순수 리팩토링
- UI P3 (파이프라인 시각화): docs 완성 후 진행이 효과적
- UI P4 (모듈별 설정 패널 재구성): P8 완성 후 진행
- UI P5 (프리셋 시스템): 프리셋 스키마 합의 필요
- UI P6 (전략 비교 뷰): 우선순위 낮음
- UI P7 (파라미터 효과 시각화): 우선순위 낮음

### docs 스키마 최종 합의안

세 에이전트의 제안을 통합한 최종 `docs` 구조 제안:

```javascript
docs: {
  summary: 'string',          // 2~3문장 개요
  timeframe: {
    primary: '1m',             // 수신 분봉 (Trader 구조)
    effective: 'string',       // 실질 참조 기간
    note: 'string',            // 보충 설명 (선택)
  },
  entry: {
    long: ['조건1', '조건2'],  // 배열 (Trader 구조, 체크리스트 UI용)
    short: ['조건1', '조건2'],
  },
  exit: {
    takeProfit: 'string',
    stopLoss: 'string',
    trailing: 'string',        // 없으면 null
    indicator: 'string',       // 지표 기반 청산 (없으면 null)
  },
  indicators: ['RSI(14)', 'Pivot Points'],  // UI 제안에서 추가
  riskManagement: {
    defaultLeverage: 3,         // 숫자 (Engineer 구조)
    defaultPositionSize: '5%',
    maxConcurrentPositions: 2,
    cooldown: '60초',
  },
  strengths: ['string'],       // 최대 3개
  weaknesses: ['string'],      // 최대 3개
  bestFor: 'string',           // Engineer 구조
  warnings: ['string'],        // Engineer 구조
  difficulty: 'beginner' | 'intermediate' | 'advanced',  // UI 제안에서 추가
}
```

이 구조가 합의되면 세 에이전트가 병렬로 작업할 수 있다:
- **Trader**: 18개 전략의 docs 내용 작성
- **Engineer**: API 확장 + config 검증 + 통합 API
- **UI**: 카드 리디자인 + 설명 패널 구현
